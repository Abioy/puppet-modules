# database.yml
# ============
# File managed by Puppet
#
<% if dashboard_db == "sqlite" -%>
# Db settings for sqlite
production:
  adapter: sqlite3
  database: db/production.sqlite3
  pool: 5
  timeout: 5000

development:
  adapter: sqlite3
  database: db/development.sqlite3
  pool: 5
  timeout: 5000

test:
  adapter: sqlite3
  database: db/test.sqlite3
  pool: 5
  timeout: 5000
<% end -%>

<% if dashboard_db == "mysql" -%>
# Db settings for mysql
production:
  adapter: mysql
  database: dashboard
  username: <%= dashboard_db_user %>
  password: <%= dashboard_db_password %>
  encoding: utf8
<% if dashboard_db_server != "localhost" -%>
  host: <%= dashboard_db_server %>
  port: 3306
<% end -%>

development:
  adapter: mysql
  database: dashboard
  # database: dashboard_devel # We leave dashboard as database for devel environment to work with (incomplete?) dahsboard's rpm init scripts
  username: <%= dashboard_db_user %>
  password: <%= dashboard_db_password %>
  encoding: utf8
<% if dashboard_db_server != "localhost" -%>
  host: <%= dashboard_db_server %>
  port: 3306
<% end -%>

test:
  adapter: mysql
  database: dashboard_test
  username: <%= dashboard_db_user %>
  password: <%= dashboard_db_password %>
  encoding: utf8
<% if dashboard_db_server != "localhost" -%>
  host: <%= dashboard_db_server %>
  port: 3306
<% end -%>
<% end -%>

<% if dashboard_db == "postgresql" -%>
# Db settings for postgresql
production:
  adapter: postgresql
  database: dashboard
  username: <%= dashboard_db_user %>
  password: <%= dashboard_db_password %>
  encoding: unicode
<% if dashboard_db_server != "localhost" -%>
  host: <%= dashboard_db_server %>
  port: 3306
<% end -%>

development:
  adapter: postgresql
  database: dashboard_devel
  username: <%= dashboard_db_user %>
  password: <%= dashboard_db_password %>
  encoding: unicode
<% if dashboard_db_server != "localhost" -%>
  host: <%= dashboard_db_server %>
  port: 3306
<% end -%>

test:
  adapter: postgresql_test
  database: dashboard
  username: <%= dashboard_db_user %>
  password: <%= dashboard_db_password %>
  encoding: unicode
<% if dashboard_db_server != "localhost" -%>
  host: <%= dashboard_db_server %>
  port: 3306
<% end -%>
<% end -%>

